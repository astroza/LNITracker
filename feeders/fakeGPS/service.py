#!/bin/env ruby

require 'date'

ENV['RAILS_ENV'] = "development"
require '../../config/environment.rb'

waypoints = [
	[-35.001624, -71.230127],
	[-35.001386, -71.230084],
	[-35.001094, -71.230343],
	[-35.001006, -71.230547],
	[-35.000988, -71.230697],
	[-35.0009, -71.230858],
	[-35.000848, -71.231094],
	[-35.000777, -71.231287],
	[-35.000689, -71.23147],
	[-35.000569, -71.231993],
	[-35.000505, -71.232371],
        [-35.000461, -71.232639],
        [-35.000452, -71.233004],
        [-35.000391, -71.233422],
        [-35.00032, -71.233776],
        [-35.000303, -71.234334],
        [-35.000355, -71.234838],
        [-35.000373, -71.235225],
        [-35.000531, -71.235675],
        [-35.000619, -71.235954],
        [-35.000935, -71.236523],
        [-35.001313, -71.23692],
        [-35.001718, -71.237188],
        [-35.00221, -71.237585],
        [-35.002509, -71.237907],
        [-35.002245, -71.2384],
        [-35.001726, -71.238336],
        [-35.001217, -71.237896],
        [-35.000725, -71.237499],
        [-34.999907, -71.236823],
        [-34.9988, -71.235911],
        [-34.997843, -71.235154],
        [-34.996978, -71.234435],
        [-34.996569, -71.234038],
        [-34.996393, -71.233738],
        [-34.996332, -71.233378],
        [-34.996332, -71.233126],
        [-34.996324, -71.232938],
        [-34.996288, -71.232788],
	[-34.996201, -71.232637],
	[-34.995827, -71.232455],
	[ -34.995507, -71.232476],
	[-34.994768, -71.232605],
	[-34.994004, -71.232669],
	[-34.993529, -71.232712],
	[-34.992562, -71.232852],
	[-34.991534, -71.23297],
	[-34.991015, -71.233023],
	[-34.990541, -71.233077],
	[-34.990049, -71.233131],
	[-34.989565, -71.233184],
	[-34.989099, -71.233238],
	[-34.988941, -71.233517],
	[-34.988941, -71.233753],
	[-34.988976, -71.234161],
	[-34.98902, -71.234601],
	[-34.989064, -71.235266],
	[-34.989143, -71.236103],
	[-34.989187, -71.236682],
	[-34.98924, -71.237465],
        [-34.989293, -71.238066],
        [-34.989337, -71.238656],
        [-34.989398, -71.239439],
        [-34.98946, -71.240115],
        [-34.989556, -71.240973],
        [-34.989591, -71.241639],
        [-34.989671, -71.242218],
        [-34.989715, -71.24298],
        [-34.989785, -71.243656],
        [-34.989372, -71.243742],
        [-34.988932, -71.243784],
        [-34.988545, -71.243827],
        [-34.988519, -71.24416],
        [-34.988422, -71.244546],
        [-34.988343, -71.244975],
        [-34.988185, -71.245437],
        [-34.98808, -71.245898],
        [-34.988343, -71.244975],
        [-34.988519, -71.24416],
        [-34.988545, -71.243827],
        [-34.988519, -71.243227],
        [-34.988484, -71.242636],
        [-34.988475, -71.241993],
        [-34.988387, -71.24137],
        [-34.988378, -71.241113],
        [-34.988018, -71.241049],
        [-34.98735, -71.24107],
        [-34.986664, -71.241188],
        [-34.986269, -71.241231],
        [-34.985724, -71.241317],
        [-34.984616, -71.241424],
        [-34.984238, -71.241488]]

puts "FakeGPS is running"
i=0
while true
	Device.all[0].trackpoints.create(:elevation => 0, :longitude => waypoints[i%waypoints.size][0], :latitude => waypoints[i%waypoints.size][1], :time => DateTime.now.to_s)
	sleep 1
	i+=1
end
